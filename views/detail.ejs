<!doctype html>
<html lang="ko">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://getbootstrap.com/docs/5.2/assets/css/docs.css" rel="stylesheet">
    <title>Josting</title>
    <link href="../img/main-icon.png" rel="shortcut icon" type="image/x-icon">
    <link rel="stylesheet" href="/public/css/main.css">

  </head>
  <body class="p-3 m-0 border-0 bd-example text-font">
    <!-- NAV BAR -->
    <%- include('nav.html') %>

    <div class="container mt-4">
        <div class="card" style="width: 100%;">
            <div class="card-body">
              <h5 class="card-title"><%= data.title %></h5>
              <h6 class="card-subtitle mb-2 text-muted"><%= data.text %></h6>
              <div style="margin-top: 1%;">
                <button type="button" class="btn btn-danger delete"
                style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: 1%;" data-id="<%= data._id %>">
                  Delete
                </button>
                <a href="/edit/<%= data._id%>" class="card-link">
                  <button type="button" class="btn btn-success"style="--bs-btn-padding-y: .25rem; --bs-btn-padding-x: .5rem; --bs-btn-font-size: .75rem; margin-right: 2%;">Edit</button>
                </a>
              </div>
            </div>
        </div>
    </div>


    
    <script src="https://code.jquery.com/jquery-3.6.1.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js"></script>
    <script>
      $(".delete").click(function(e){
        var postNum = e.target.dataset.id;
        $.ajax({
          method : "DELETE",
          url : "/delete",
          data : {_id : postNum},
        }).done((result) =>{
          $(this).parents("div").fadeOut();
          window.location.replace("/list");
        }).fail(function(xhr, textStatus, errorThrown){
          console.log(`FAILED : ${errorThrown}`)
        })
      });
    </script>

    </body>
</html>